(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(17),u=t.n(c),o=t(8),s=t(4),i=t(3),l=t.n(i),d=t(5),b=t(6),j=t.n(b),f="/api/persons",p={getAll:function(){var e=Object(d.a)(l.a.mark((function e(){var n,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.get(f),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.post(f,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(l.a.mark((function e(n,t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.a.put("".concat(f,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(d.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.delete("".concat(f,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},h=t(0),m=function(e){var n=e.formHandler,t=e.nameHandler,r=e.nameValue,a=e.numberHandler,c=e.numberValue;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{onChange:t,value:r})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{onChange:a,value:c})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.handler,t=e.value;return Object(h.jsxs)("div",{children:["filter shown with ",Object(h.jsx)("input",{onChange:n,value:t})]})},O=function(e){var n=e.person,t=e.setPersons,r=e.persons;return Object(h.jsxs)("p",{children:[n.name," ",n.number," ",Object(h.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&p.deletePerson(n.id).then((function(){var e=r.filter((function(e){return e.id!==n.id}));t(e)}))},children:"delete"})]},n.name)},x=function(e){var n=e.persons,t=e.setPersons;return Object(h.jsx)(h.Fragment,{children:n.map((function(e){return Object(h.jsx)(O,{setPersons:t,person:e,persons:n},e.id)}))})},w=function(e){var n=e.message;return n?Object(h.jsx)("div",{className:n.positive?"positive":"error",children:n.content}):null},g=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),u=Object(s.a)(c,2),i=u[0],l=u[1],d=Object(r.useState)(""),b=Object(s.a)(d,2),j=b[0],f=b[1],O=Object(r.useState)(""),g=Object(s.a)(O,2),k=g[0],C=g[1],y=Object(r.useState)(null),P=Object(s.a)(y,2),S=P[0],H=P[1];Object(r.useEffect)((function(){p.getAll().then((function(e){a(e)}))}),[]);var A=function(e,n){H({content:e,positive:n}),setTimeout((function(){H(null)}),5e3)},L=k?t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})):t;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(w,{message:S}),Object(h.jsx)(v,{handler:function(e){return C(e.target.value)},value:k}),Object(h.jsx)("h2",{children:"Add a new"}),Object(h.jsx)(m,{formHandler:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase()===i.toLowerCase()}));if(function(e){return e.length}(n)){if(!window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?")))return;var r=n[0],c=Object(o.a)(Object(o.a)({},r),{},{number:j});p.update(r.id,c).then((function(e){A("Updated ".concat(r.name,"'s number"),!0),p.getAll().then((function(e){a(e)})),l(""),f("")})).catch((function(e){A(e.response.data.error,!1),console.log(e)}))}else p.create({name:i,number:j}).then((function(e){A("Added ".concat(i),!0),a(e)})).catch((function(e){A(e.response.data.error,!1)})),l(""),f("")},nameHandler:function(e){return l(e.target.value)},nameValue:i,numberHandler:function(e){return f(e.target.value)},numberValue:j}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(x,{setPersons:a,persons:L})]})};t(42);u.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.7a19bcee.chunk.js.map